<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Join</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <style>
        .id_ok{color:blue; display: none;}
        .id_already{color:red; display: none;}

    </style>
</head>
<body>
<form class="join" action="join" method="post">
    <h2>백신 예약 시스템 회원가입</h2>
    <div class="join_ID">
        <h4>아이디</h4>
        <input type="text" name="ID" id="ID" placeholder="아이디를 입력하세요" required oninput="checkId()">
        <span class="id_ok">사용 가능한 아이디입니다.</span>
        <span class="id_already">이미 사용중인 아이디입니다.</span>
    </div>

    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script type="text/javascript">
    function checkId(){
        var ID = $('#ID').val(); //id값이 "id"인 입력란의 값을 저장
        $.ajax({
            url:'/idCheck', //Controller에서 인식할 주소
            type:'post', //POST 방식으로 전달
            data:{ID:ID},
             success:function(cnt){ //컨트롤러에서 넘어온 cnt값을 받는다
                if(cnt != 1){ //cnt가 1이 아니면(=0일 경우) -> 사용 가능한 아이디
                    $('.id_ok').css("display","inline-block");
                    $('.id_already').css("display", "none");
                } else { // cnt가 1일 경우 -> 이미 존재하는 아이디
                    $('.id_already').css("display","inline-block");
                    $('.id_ok').css("display", "none");
                }
            },
            error:function(){
                alert("에러입니다");
            }
        });
    };
    </script>

    <div class="join_PW">
        <h4>비밀번호</h4>
        <input type="password" name="PW" id="PW" placeholder="비밀번호를 입력하세요">
        <input type="password" name="PW_check" id="PW_check" placeholder="비밀번호를 다시 입력하세요">
    </div>
    <div class="join_Email">
        <h4>이메일</h4>
        <input type="email" name="Email" id="Email" placeholder="이메일을 입력하세요">
    </div>
    <div>
        <h4>이름</h4>
        <input type="text" name="Uname" id="Uname" placeholder="이름">
        <input type="text" name="phone_num" id="phone_num" placeholder="-를 포함하여 입력하세요">
    </div>
    <div>
        <h4>성별</h4>
        <input type="radio" name="sex" value="F" checked="checked">남성
        <input type="radio" name="sex" value="M" checked>여성
    </div>
    <div>
        <h4>나이</h4>
        <input type="number" name="age" id="age" placeholder="나이">
    </div>
    <div>
        <h4>지역</h4>
        <select name="Lid">
            <option value="2">서울특별시</option>
            <option value="31">경기도</option>
            <option value="32">인천광역시</option>
            <option value="33">강원도</option>
            <option value="41">충청남도</option>
            <option value="42">대전광역시</option>
            <option value="43">충청북도</option>
            <option value="44">세종특별자치시</option>
            <option value="51">부산광역시</option>
            <option value="52">울산광역시</option>
            <option value="53">대구광역시</option>
            <option value="54">경상북도</option>
            <option value="55">경상남도</option>
            <option value="61">전라남도</option>
            <option value="62">광주광역시</option>
            <option value="63">전라북도</option>
            <option value="64">제주특별자치도</option>
        </select>
        <input type="text" name="rest_addr" id="rest_addr" placeholder="나머지 주소">
    </div>
    <div>
        <h4>주민번호</h4>
        <input type="text" name="ssn1" id="ssn1" placeholder="앞자리">-
        <input type="text" name="ssn2" id="ssn2" placeholder="뒷자리">
    </div>
    <br>
    <div class="goback_login">
        <input type="submit" value="회원가입">
    </div>
</form>
</body>
</html>